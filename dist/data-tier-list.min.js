import*as DataTier from"./data-tier/data-tier.min.js";const OPTIMIZATION_MAP_KEY=Symbol("optimization.map.key");class DataTierList extends HTMLTemplateElement{constructor(){}get defaultTieTarget(){return"items"}set items(t){if(!Array.isArray(t))return;const e=this.parentNode,i=this.content.firstElementChild.dataset,a=t.length;let r,n;(n=i.dtListItemAid)||(n=(new Date).getTime(),i.dtListItemAid=n);const s=e.querySelectorAll('[data-dt-list-item-aid="'+n+'"]');let l=s.length;if(l>a)for(;l>a;)e.removeChild(s[--l]);l<a&&(r=DataTierList.extractControllerParameters(this.dataset.tie),DataTierList.insertNewContent(e,this,r,l,a))}static extractControllerParameters(t){let e;if(t&&(!(e=t.trim().split(/\s+=>\s+/))||!e.length))throw new Error("invalid DataTier configuration");return e}static insertNewContent(t,e,i,a,r){const n=i[0]+(i[0].indexOf(":")<0?":":"."),s=DataTierList.getOptimizationMap(e).index,l=e.content;let o,d,m,c,p,T=null,g=a;for(;g<r;g++){for(c=(o=l.cloneNode(!0)).querySelectorAll("*"),d=s.length;d--;)(p=c[m=s[d]]).dataset.tie=p.dataset.tie.replace(/item:/g,n+g+".").replace(/item\s*=/g,n+g+"=").replace(/item(?![.a-zA-Z0-9])/g,n+g);g===a?T=o:T.appendChild(o)}t.appendChild(T)}static getOptimizationMap(t){let e=t[OPTIMIZATION_MAP_KEY];if(!e){e={index:[]};const i=t.content.querySelectorAll("*");let a,r=i.length;for(;r;)(a=i[--r]).dataset&&"string"==typeof a.dataset.tie&&e.index.push(r);t[OPTIMIZATION_MAP_KEY]=e}return e}}customElements.get("data-tier-list")||customElements.define("data-tier-list",DataTierList,{extends:"template"});