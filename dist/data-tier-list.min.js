const ITEMS_KEY=Symbol("data.tier.items.key");class DataTierItemTemplate extends HTMLTemplateElement{constructor(){super(),this[ITEMS_KEY]=[]}get items(){return this[ITEMS_KEY]}set items(t){if(!Array.isArray(t))return;this[ITEMS_KEY]=t;let e,a,i,r=this.parentNode,n=t.length;(i=(a=this.content.firstElementChild.dataset).dtListItemAid)||(i=(new Date).getTime(),a.dtListItemAid=i);let l=r.querySelectorAll('[data-dt-list-item-aid="'+i+'"]'),s=l.length;if(s>n)for(;s>n;)r.removeChild(l[--s]);s<n&&(e=DataTierItemTemplate.extractControllerParameters(this.dataset.tie),DataTierItemTemplate.insertNewContent(r,this,e,s,n))}static extractControllerParameters(t){let e;if(t&&(!(e=t.trim().split(/\s+=>\s+/))||2!==e.length))throw new Error("invalid DataTier configuration");return e}static insertNewContent(t,e,a,i,r){let n,l,s,m,o,d,p,c,h=null,T=i,u=a[0]+(a[0].indexOf(":")<0?":":".");for(l=e.content,d=(n=DataTierItemTemplate.prepareOptimizationMap(e)).index;T<r;T++){for(p=(s=l.cloneNode(!0)).querySelectorAll("*"),m=d.length;m--;)(c=p[o=d[m]]).dataset.tie=c.dataset.tie.replace(/item:/g,u+T+".");T===i?h=s:h.appendChild(s)}t.appendChild(h)}static prepareOptimizationMap(t){let e,a={index:[]},i=t.content.querySelectorAll("*"),r=i.length;for(;r--;)(e=i[r]).dataset&&"string"==typeof e.dataset.tie&&a.index.push(r);return a}}customElements.define("data-tier-item-template",DataTierItemTemplate,{extends:"template"});